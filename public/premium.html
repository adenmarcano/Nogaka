<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manga Browser</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
</head>

<body style="background-color: var(--bg-dark); color: var(--text-light); line-height: 1.6;
background-image: 
    radial-gradient(circle at 25% 25%, rgba(117, 164, 57, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(22, 125, 157, 0.15) 0%, transparent 50%),
    linear-gradient(135deg, #121212 0%, #1a1a2e 100%);
background-attachment: fixed; color: #fff; font-family: 'Segoe UI', sans-serif;">
  
  <!-- Header Include -->
  <div id="header-container"></div>

  <!-- Promo Banner with Animation -->
  <div class="promo-banner" style="background: linear-gradient(90deg, #167D9D, #75A439); padding: 12px 0; text-align: center; font-weight: bold; color: white; position: relative; overflow: hidden;">
    <span style="animation: pulse 2s infinite;">üéÅ</span> 
    <span class="promo-text" style="position: relative; display: inline-block;">
      Refresh the page to get 100 free coins! Premium users get 200 coins!
    </span>
    <div class="confetti" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></div>
  </div>



  <!-- Main Content -->
  <div style="display: flex; max-width: 95%; margin: 20px auto;">
    <!-- Left Column - Slot Machines -->
    <main class="container" style="background-color: #18203D; padding: 20px; width: 70%; border-radius: 10px; box-shadow: 0 10px 30px rgba(23, 126, 157, 0.3); margin-right: 20px;">
      <!-- User Stats Bar -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 15px; background: rgba(117, 164, 57, 0.1); border-radius: 10px;">
        <div style="display: flex; align-items: center;">
          <div style="width: 50px; height: 50px; background: #167D9D; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold; font-size: 20px;" id="userAvatar">U</div>
          <div>
            <h3 style="margin: 0; color: #75A439;" id="loggedInUsername">Player</h3>
            <div style="display: flex; align-items: center; margin-top: 5px;">
              <span style="color: #FFD700; font-weight: bold;">üí∞ <span id="userCoins">0</span> coins</span>
              <span id="premiumBadge" style="margin-left: 15px; padding: 3px 8px; background: linear-gradient(90deg, #FFD700, #FFA500); color: #301934; border-radius: 10px; font-size: 12px; font-weight: bold; display: none;">PREMIUM</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Bronze Slot Machine -->
      <section style="margin-bottom: 40px;">
        <h2 style="color: #CD7F32; border-bottom: 2px solid #CD7F32; padding-bottom: 10px; display: flex; align-items: center;">
          <span style="margin-right: 10px;">ü•â</span> Bronze Slots (50 coins)
        </h2>
        
        <div id="bronze-slot-machine" class="slot-machine" style="border-color: #CD7F32;">
          <div class="slot-reels-container">
            <!-- Single Payline in the middle -->
            <div class="payline" style="position: absolute; top: 50%; left: 0; width: 100%; height: 4px; background: #75A439; transform: translateY(-50%); box-shadow: 0 0 15px #75A439; z-index: 10;"></div>
            <!-- Reels will be generated by JavaScript -->
          </div>
          <button class="spin-btn" data-machine="bronze" style="background: linear-gradient(90deg, #CD7F32, #A67C52);">SPIN NOW! (50 coins)</button>
        </div>
      </section>

      <!-- Silver Slot Machine -->
      <section style="margin-bottom: 40px;">
        <h2 style="color: #C0C0C0; border-bottom: 2px solid #C0C0C0; padding-bottom: 10px; display: flex; align-items: center;">
          <span style="margin-right: 10px;">ü•à</span> Silver Slots (200 coins)
        </h2>
        
        <div id="silver-slot-machine" class="slot-machine" style="border-color: #C0C0C0;">
          <div class="slot-reels-container">
            <!-- Single Payline in the middle -->
            <div class="payline" style="position: absolute; top: 50%; left: 0; width: 100%; height: 4px; background: #75A439; transform: translateY(-50%); box-shadow: 0 0 15px #75A439; z-index: 10;"></div>
            <!-- Reels will be generated by JavaScript -->
          </div>
          <button class="spin-btn" data-machine="silver" style="background: linear-gradient(90deg, #C0C0C0, #A0A0A0);">SPIN NOW! (200 coins)</button>
        </div>
      </section>

      <!-- Gold Slot Machine -->
      <section style="margin-bottom: 40px;">
        <h2 style="color: #FFD700; border-bottom: 2px solid #FFD700; padding-bottom: 10px; display: flex; align-items: center;">
          <span style="margin-right: 10px;">ü•á</span> Gold Slots (500 coins)
        </h2>
        
        <div id="gold-slot-machine" class="slot-machine" style="border-color: #FFD700;">
          <div class="slot-reels-container">
            <!-- Single Payline in the middle -->
            <div class="payline" style="position: absolute; top: 50%; left: 0; width: 100%; height: 4px; background: #75A439; transform: translateY(-50%); box-shadow: 0 0 15px #75A439; z-index: 10;"></div>
            <!-- Reels will be generated by JavaScript -->
          </div>
          <button class="spin-btn" data-machine="gold" style="background: linear-gradient(90deg, #FFD700, #FFA500);">SPIN NOW! (500 coins)</button>
        </div>
      </section>

      

      <!-- Result Message -->
      <div id="result-message" style="
        margin: 30px auto;
        padding: 20px;
        font-size: 22px;
        color: #fff;
        display: none;
        background: rgba(117, 164, 57, 0.2);
        border-radius: 10px;
        max-width: 80%;
        border: 2px solid #75A439;
        animation: pulseBorder 2s infinite;
        text-align: center;
      "></div>

      <!-- Jackpot Celebration -->
      <div id="jackpot-celebration" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        flex-direction: column;
      ">
        <div style="
          background: linear-gradient(135deg, #18203D, #301934);
          padding: 30px;
          border-radius: 20px;
          text-align: center;
          max-width: 80%;
          border: 3px solid #FFD700;
          box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
        ">
          <h2 style="color: #FFD700; font-size: 28px; margin-bottom: 20px;">üí∞ JACKPOT! üí∞</h2>
          <p id="jackpot-message" style="font-size: 20px; margin-bottom: 20px;">You won 20000 coins!</p>
          <button id="claim-jackpot-btn" style="
            padding: 12px 24px;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            color: #301934;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
          ">CLAIM YOUR PRIZE!</button>
        </div>
      </div>
    </main>

    <!-- Right Column - Premium and Rewards -->
    <aside style="width: 30%;">
      <!-- Premium Box -->
      <div style="background: linear-gradient(135deg, #301934, #6A0DAD); padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(106, 13, 173, 0.5);">
        <h3 style="color: #A45CFF; margin-top: 0; display: flex; align-items: center;">
          <span style="margin-right: 10px;">üíé</span> Premium Membership
        </h3>
        <p style="margin-bottom: 20px;">Upgrade for exclusive benefits!</p>
        
        <div style="margin-bottom: 20px;">
          <p style="display: flex; align-items: center; margin: 10px 0;"><span style="color: #A45CFF; margin-right: 10px;">‚úì</span> Double daily coins (200 per refresh)</p>
          <p style="display: flex; align-items: center; margin: 10px 0;"><span style="color: #A45CFF; margin-right: 10px;">‚úì</span> Double all rewards</p>
          <p style="display: flex; align-items: center; margin: 10px 0;"><span style="color: #A45CFF; margin-right: 10px;">‚úì</span> Higher win chances</p>
          <p style="display: flex; align-items: center; margin: 10px 0;"><span style="color: #A45CFF; margin-right: 10px;">‚úì</span> Exclusive badges</p>
        </div>
        
        <button id="buy-premium-btn" style="
          width: 100%;
          padding: 12px 0;
          background: linear-gradient(90deg, #A45CFF, #6A0DAD);
          color: white;
          border: none;
          border-radius: 30px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.3s;
          box-shadow: 0 4px 10px rgba(164, 92, 255, 0.4);
        ">Buy Premium (1000 coins)</button>
        
        <div id="premium-owned" style="
          padding: 12px;
          background: rgba(164, 92, 255, 0.2);
          border-radius: 5px;
          text-align: center;
          color: #A45CFF;
          font-weight: bold;
          display: none;
        ">
          üéâ Premium Activated!
        </div>
      </div>

      <!-- Rewards Chart -->
      <div style="background: linear-gradient(135deg, #18203D, #167D9D); padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(22, 125, 157, 0.5);">
        <h3 style="color: #75A439; margin-top: 0; display: flex; align-items: center;">
          <span style="margin-right: 10px;">üèÜ</span> Rewards Chart
        </h3>
        
        <div style="overflow-x: auto;">
          <table style="width: 100%; border-collapse: collapse;">
            <thead>
              <tr style="background: rgba(117, 164, 57, 0.3);">
                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #75A439;">Machine</th>
                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #75A439;">Reward</th>
                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #75A439;">Payout</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">ü•â Bronze</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">3x üí∞</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2); text-align: right; color: #FFD700;">200 coins</td>
              </tr>
              <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">ü•â Bronze</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">3x üíµ</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2); text-align: right; color: #FFD700;">500 coins</td>
              </tr>
              <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">ü•à Silver</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">3x üíé</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2); text-align: right; color: #FFD700;">2000 coins</td>
              </tr>
              <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">ü•à Silver</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">3x üèÜ</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2); text-align: right; color: #FFD700;">5000 coins</td>
              </tr>
              <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">ü•á Gold</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2);">3x üíé</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(117, 164, 57, 0.2); text-align: right; color: #FFD700;">5000 coins</td>
              </tr>
              <tr>
                <td style="padding: 10px;">ü•á Gold</td>
                <td style="padding: 10px;">3x üèÜ</td>
                <td style="padding: 10px; text-align: right; color: #FFD700;">20000 coins</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div style="margin-top: 20px; padding: 10px; background: rgba(255, 215, 0, 0.1); border-radius: 5px; border-left: 3px solid #FFD700;">
          <p style="margin: 5px 0; font-size: 14px;">üí° <strong>Tip:</strong> Premium members get DOUBLE all rewards!</p>
          <p style="margin: 5px 0; font-size: 14px;">üé∞ Any matching pair gives 50% of the reward</p>
        </div>
      </div>
    </aside>
  </div>

  <!-- Footer Include -->
  <div id="footer-container"></div>

  <!-- JavaScript -->
  <script>
    // User Data
    let user = {
      coins: localStorage.getItem('userCoins') ? parseInt(localStorage.getItem('userCoins')) : 0,
      premium: localStorage.getItem('userPremium') === 'true',
      lastRefresh: localStorage.getItem('lastRefresh')
    };

    // Give coins on refresh (100 for normal, 200 for premium)
    const refreshCoins = user.premium ? 200 : 100;
    user.coins += refreshCoins;
    localStorage.setItem('userCoins', user.coins);
    user.lastRefresh = new Date().toISOString();
    localStorage.setItem('lastRefresh', user.lastRefresh);
    
    // Show refresh bonus alert
    showAlert(`+${refreshCoins} coins added for refreshing the page!`, "#75A439");
    
    // Update UI
    function updateUI() {
      document.getElementById('userCoins').textContent = user.coins;
      
      if (user.premium) {
        document.getElementById('premiumBadge').style.display = 'block';
        document.getElementById('premium-owned').style.display = 'block';
        document.getElementById('buy-premium-btn').style.display = 'none';
      } else {
        document.getElementById('premiumBadge').style.display = 'none';
        document.getElementById('premium-owned').style.display = 'none';
        document.getElementById('buy-premium-btn').style.display = 'block';
      }
      
      localStorage.setItem('userCoins', user.coins);
      localStorage.setItem('userPremium', user.premium);
      localStorage.setItem('lastRefresh', user.lastRefresh);
    }

    updateUI();

    // Slot machine configurations with increased payouts
    const slotConfigs = {
      bronze: {
        cost: 50,
        symbols: [
          { name: "200 Coins", emoji: "üí∞", color: "#FFD700", weight: 50, payout: 200 },
          { name: "500 Coins", emoji: "üíµ", color: "#75A439", weight: 40, payout: 500 },
          { name: "Free Spin", emoji: "üé∞", color: "#167D9D", weight: 30, payout: 0 },
          { name: "Try Again", emoji: "üîÑ", color: "#CD7F32", weight: 5, payout: 0 }
        ],
        jackpot: 500
      },
      silver: {
        cost: 200,
        symbols: [
          { name: "500 Coins", emoji: "üí∞", color: "#FFD700", weight: 40, payout: 500 },
          { name: "2000 Coins", emoji: "üíé", color: "#A45CFF", weight: 30, payout: 2000 },
          { name: "5000 Coins", emoji: "üèÜ", color: "#FFD700", weight: 10, payout: 5000, isJackpot: true },
          { name: "Free Spin", emoji: "üé∞", color: "#C0C0C0", weight: 20, payout: 0 }
        ],
        jackpot: 5000
      },
      gold: {
        cost: 500,
        symbols: [
          { name: "1000 Coins", emoji: "üí∞", color: "#FFD700", weight: 35, payout: 1000 },
          { name: "5000 Coins", emoji: "üíé", color: "#A45CFF", weight: 25, payout: 5000 },
          { name: "20000 Coins", emoji: "üèÜ", color: "#FFD700", weight: 8, payout: 20000, isJackpot: true },
          { name: "Free Spin", emoji: "üé∞", color: "#FFD700", weight: 15, payout: 0 }
        ],
        jackpot: 20000
      }
    };

    // Initialize all slot machines
    function initializeSlots() {
      for (const [machine, config] of Object.entries(slotConfigs)) {
        const container = document.getElementById(`${machine}-slot-machine`).querySelector('.slot-reels-container');
        container.innerHTML = '';
        
        // Create weighted symbol array for randomization
        let weightedSymbols = [];
        config.symbols.forEach(symbol => {
          for (let i = 0; i < symbol.weight; i++) {
            weightedSymbols.push(symbol);
          }
        });
        
        for (let i = 0; i < 3; i++) {
          const reel = document.createElement('div');
          reel.className = 'slot-reel';
          reel.style.width = '30%';
          reel.style.height = '100%';
          reel.style.position = 'relative';
          reel.style.overflow = 'hidden';
          reel.style.borderRadius = '5px';
          reel.style.backgroundColor = '#18203D';
          reel.style.border = '2px solid ' + (machine === 'bronze' ? '#CD7F32' : machine === 'silver' ? '#C0C0C0' : '#FFD700');
          
          // Create reel strip with symbols
          const reelStrip = document.createElement('div');
          reelStrip.className = 'reel-strip';
          reelStrip.style.position = 'absolute';
          reelStrip.style.width = '100%';
          reelStrip.style.transition = 'none';
          
          // Add symbols to the strip (5 visible symbols per reel)
          for (let j = 0; j < 20; j++) {
            const randomSymbol = weightedSymbols[Math.floor(Math.random() * weightedSymbols.length)];
            const symbolElement = document.createElement('div');
            symbolElement.className = 'slot-symbol';
            symbolElement.style.height = '50px';
            symbolElement.style.display = 'flex';
            symbolElement.style.alignItems = 'center';
            symbolElement.style.justifyContent = 'center';
            symbolElement.style.fontSize = '30px';
            symbolElement.textContent = randomSymbol.emoji;
            symbolElement.setAttribute('data-name', randomSymbol.name);
            symbolElement.setAttribute('data-color', randomSymbol.color);
            symbolElement.setAttribute('data-payout', randomSymbol.payout);
            symbolElement.setAttribute('data-jackpot', randomSymbol.isJackpot || false);
            reelStrip.appendChild(symbolElement);
          }
          
          reel.appendChild(reelStrip);
          container.appendChild(reel);
        }
        
        // Add center payline
        const payline = document.createElement('div');
        payline.className = 'payline';
        payline.style.position = 'absolute';
        payline.style.top = '50%';
        payline.style.left = '0';
        payline.style.width = '100%';
        payline.style.height = '4px';
        payline.style.background = '#75A439';
        payline.style.transform = 'translateY(-50%)';
        payline.style.boxShadow = '0 0 15px #75A439';
        payline.style.zIndex = '10';
        container.appendChild(payline);
      }
    }

    // Spin functionality
    let spinning = false;
    
    document.querySelectorAll('.spin-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        if (spinning) return;
        
        const machine = this.getAttribute('data-machine');
        const config = slotConfigs[machine];
        
        // Check if user has enough coins
        if (user.coins < config.cost) {
          showAlert(`You need at least ${config.cost} coins to spin!`, "#FF6B6B");
          return;
        }
        
        spinning = true;
        
        // Deduct coins
        user.coins -= config.cost;
        updateUI();
        
        // Button click effect
        this.style.transform = 'translateY(2px)';
        
        // Disable all buttons during spin
        document.querySelectorAll('.spin-btn').forEach(b => b.disabled = true);
        this.textContent = 'SPINNING...';
        document.getElementById('result-message').style.display = 'none';
        
        const reels = document.querySelectorAll(`#${machine}-slot-machine .reel-strip`);
        const results = [];
        
        reels.forEach((reel, index) => {
          // Reset position
          reel.style.transition = 'none';
          reel.style.top = '0px';
          
          // Force reflow
          void reel.offsetHeight;
          
          // Calculate random stop position (centered on middle row)
          const symbolHeight = 50;
          const totalSymbols = reel.children.length;
          const randomOffset = Math.floor(Math.random() * totalSymbols);
          const stopPosition = -((randomOffset * symbolHeight) + (symbolHeight * 1)); // 1 = middle row
          
          // Add slight delay between reels
          setTimeout(() => {
            reel.style.transition = 'top 2s cubic-bezier(0.1, 0.5, 0.3, 1)';
            reel.style.top = `${stopPosition}px`;
            
            // Get the result symbol (middle row)
            setTimeout(() => {
              const resultIndex = (randomOffset + 1) % totalSymbols; // +1 for middle row
              const resultSymbol = reel.children[resultIndex];
              results.push({
                name: resultSymbol.getAttribute('data-name'),
                color: resultSymbol.getAttribute('data-color'),
                emoji: resultSymbol.textContent,
                payout: parseInt(resultSymbol.getAttribute('data-payout')),
                isJackpot: resultSymbol.getAttribute('data-jackpot') === 'true'
              });
              
              // Highlight the winning symbol
              resultSymbol.style.animation = 'symbolWin 0.5s 3';
              
              // Check if all reels have stopped
              if (results.length === reels.length) {
                evaluateResults(machine, results, config);
              }
            }, 2000);
          }, index * 300);
        });
      });
    });
    
    // Evaluate the spin results (middle row only)
    function evaluateResults(machine, results, config) {
      spinning = false;
      
      // Re-enable buttons
      document.querySelectorAll('.spin-btn').forEach(b => {
        b.disabled = false;
        b.style.transform = 'none';
        b.textContent = `SPIN NOW! (${slotConfigs[b.getAttribute('data-machine')].cost} coins)`;
      });
      
      // Check for matches in middle row
      const uniqueSymbols = [...new Set(results.map(r => r.name))];
      
      if (uniqueSymbols.length === 1) {
        // All symbols match
        let payout = results[0].payout;
        
        // Double payout for premium users
        if (user.premium) {
          payout *= 2;
        }
        
        if (results[0].isJackpot) {
          // JACKPOT WIN
          user.coins += payout;
          
          // Special jackpot effects
          document.getElementById('jackpot-message').textContent = `You won ${payout} coins!`;
          document.getElementById('jackpot-celebration').style.display = 'flex';
          
          // Intense confetti
          createConfetti(200);
          setTimeout(() => createConfetti(200), 500);
          setTimeout(() => createConfetti(200), 1000);
          
          showAlert(`JACKPOT! You won ${payout} coins!`, "#FFD700");
        } else {
          // Regular win
          user.coins += payout;
          
          document.getElementById('result-message').innerHTML = 
            `You won <span style="color: ${results[0].color}; font-weight: bold;">${payout} coins</span> ${results[0].emoji}`;
          document.getElementById('result-message').style.display = 'block';
          document.getElementById('result-message').style.color = results[0].color;
          
          createConfetti(50);
          showAlert(`You won ${payout} coins!`, results[0].color);
        }
      } 
      else if (uniqueSymbols.length === 2) {
        // Two matching symbols (partial win)
        const matchingSymbol = results.find(r => 
          results.filter(x => x.name === r.name).length >= 2
        );
        
        if (matchingSymbol && matchingSymbol.payout > 0) {
          let partialPayout = Math.floor(matchingSymbol.payout * 0.5);
          
          // Double payout for premium users
          if (user.premium) {
            partialPayout *= 2;
          }
          
          user.coins += partialPayout;
          
          document.getElementById('result-message').innerHTML = 
            `Partial win! You got <span style="color: ${matchingSymbol.color}; font-weight: bold;">${partialPayout} coins</span> ${matchingSymbol.emoji}`;
          document.getElementById('result-message').style.display = 'block';
          document.getElementById('result-message').style.color = matchingSymbol.color;
          
          createConfetti(30);
          showAlert(`Partial win! +${partialPayout} coins!`, matchingSymbol.color);
        } else {
          document.getElementById('result-message').textContent = "No win this time. Try again!";
          document.getElementById('result-message').style.display = 'block';
          document.getElementById('result-message').style.color = "#167D9D";
          showAlert("No win this time. Try again!", "#167D9D");
        }
      } 
      else {
        // No matches
        document.getElementById('result-message').textContent = "No win this time. Try again!";
        document.getElementById('result-message').style.display = 'block';
        document.getElementById('result-message').style.color = "#167D9D";
        showAlert("No win this time. Try again!", "#167D9D");
      }
      
      updateUI();
    }
    
    // Buy Premium button
    document.getElementById('buy-premium-btn').addEventListener('click', function() {
      if (user.premium) return;
      
      if (user.coins < 1000) {
        showAlert("You need 1000 coins to buy Premium!", "#FF6B6B");
        return;
      }
      
      user.coins -= 1000;
      user.premium = true;
      updateUI();
      
      showAlert("üéâ Premium unlocked! You now get double refresh coins and double all rewards!", "#A45CFF");
      createConfetti(100);
    });
    
    // Claim Jackpot button
    document.getElementById('claim-jackpot-btn').addEventListener('click', function() {
      document.getElementById('jackpot-celebration').style.display = 'none';
      document.getElementById('result-message').innerHTML = 'üí∞ JACKPOT claimed! Check your coin balance! üí∞';
      document.getElementById('result-message').style.display = 'block';
      document.getElementById('result-message').style.color = '#FFD700';
    });
    
    // Create confetti effect
    function createConfetti(count = 50) {
      const confettiContainer = document.querySelector('.confetti');
      confettiContainer.innerHTML = '';
      
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.style.position = 'absolute';
        confetti.style.width = '10px';
        confetti.style.height = '10px';
        confetti.style.backgroundColor = getRandomColor();
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = '-10px';
        confetti.style.opacity = '0';
        confetti.style.transform = 'rotate(0deg)';
        confetti.style.animation = `fall ${3 + Math.random() * 5}s linear forwards`;
        
        confettiContainer.appendChild(confetti);
        
        // Fade in
        setTimeout(() => {
          confetti.style.opacity = '0.8';
        }, 100);
      }
    }
    
    // Show alert message
    function showAlert(text, color) {
      const alertBox = document.createElement('div');
      alertBox.textContent = text;
      alertBox.style.position = 'fixed';
      alertBox.style.bottom = '20px';
      alertBox.style.left = '50%';
      alertBox.style.transform = 'translateX(-50%)';
      alertBox.style.padding = '15px 25px';
      alertBox.style.background = color;
      alertBox.style.color = '#fff';
      alertBox.style.borderRadius = '10px';
      alertBox.style.fontWeight = 'bold';
      alertBox.style.boxShadow = '0 5px 15px rgba(0,0,0,0.5)';
      alertBox.style.zIndex = '1000';
      alertBox.style.animation = 'alertIn 0.3s forwards, alertOut 0.3s forwards 2s';
      
      document.body.appendChild(alertBox);
      
      setTimeout(() => {
        alertBox.remove();
      }, 2300);
    }
    
    function getRandomColor() {
      const colors = ['#75A439', '#167D9D', '#FFD700', '#FF6B6B', '#A45CFF'];
      return colors[Math.floor(Math.random() * colors.length)];
    }
    
    // Initialize the slot machines on load
    initializeSlots();
    
    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      .slot-machine {
        width: 100%;
        margin: 0 auto;
        background: #301934;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        position: relative;
        border: 5px solid;
        margin-bottom: 30px;
      }
      
      .slot-reels-container {
        display: flex;
        justify-content: space-between;
        height: 150px;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
      }
      
      .slot-reel {
        width: 30%;
        height: 100%;
        position: relative;
        overflow: hidden;
        border-radius: 5px;
        background-color: #18203D;
        border: 2px solid;
      }
      
      .reel-strip {
        position: absolute;
        width: 100%;
        transition: none;
      }
      
      .spin-btn {
        display: block;
        width: 100%;
        padding: 15px 0;
        color: white;
        font-size: 18px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }
      
      .spin-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(0,0,0,0.6);
      }
      
      .slot-symbol {
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        animation: slotGlow 2s infinite alternate;
      }
      
      @keyframes slotGlow {
        from { opacity: 0.8; }
        to { opacity: 1; text-shadow: 0 0 10px currentColor; }
      }
      
      @keyframes symbolWin {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }
      
      @keyframes fall {
        to {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }
      
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
      
      @keyframes pulseBorder {
        0% { box-shadow: 0 0 0 0 rgba(117, 164, 57, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(117, 164, 57, 0); }
        100% { box-shadow: 0 0 0 0 rgba(117, 164, 57, 0); }
      }
      
      @keyframes alertIn {
        from { opacity: 0; transform: translateX(-50%) translateY(20px); }
        to { opacity: 1; transform: translateX(-50%) translateY(0); }
      }
      
      @keyframes alertOut {
        from { opacity: 1; transform: translateX(-50%) translateY(0); }
        to { opacity: 0; transform: translateX(-50%) translateY(20px); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>